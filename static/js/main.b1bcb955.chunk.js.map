{"version":3,"sources":["PreviewPane.js","Sliders/SingleSlider.js","Sliders/Sliders.js","SliderPane.js","QueryFilter.js","FilterPane.js","InfoFields.js","InfoPane.js","ViewPane.js","MappingsPane.js","LinkPane.js","Projection.js","Layout.js","Data.js","App.js","serviceWorker.js","index.js"],"names":["PreviewPane","Component","constructor","props","super","this","state","dimensions","imgURL","previewImage","timeoutId","componentDidMount","setPreviewPaneCanvas","side_canvas","componentDidUpdate","prevProps","hover_index","setState","clearTimeout","setTimeout","render","previewPane_image_size","_jsxs","children","style","position","width","height","textAlign","_jsx","display","verticalAlign","setPreviewImage","ref","React","memo","SingleSlider","arguments","val_min","range","val_max","value","checkboxChecked","handleUpdate","event","newValue","onChangeSlider","id","console","log","handleCheckbox","target","checked","onChangeCheckbox","classes","marks","Array","from","length","_","i","label","concat","Math","floor","markLabelStyle","markLabelChecked","markLabel","sliderStyle","sliderChecked","slider","Grid","container","item","xs","marginLeft","Slider","defaultValue","valueLabelDisplay","shiftStep","step","root","min","max","onChange","FormControlLabel","control","Checkbox","name","color","withStyles","Sliders","changeCheckbox","componentName","isChecked","metadata","settings","calculateProjection","filtered","Float32Array","fill","forEach","element","index","refSliders","current","list","Object","values","map","idx","reduce","curr","changeSlider","bind","slidersAr","sliders","refs","createRef","filterData","filters","datafilter","filteredArr","SliderList","SliderPane","sliderReset","barData","filterImageAr","currentProjection","CustomResultProcessing","SimpleResultProcessing","filter","row","fieldOrLabel","operator","field","tryToGetFieldCategory","toLowerCase","indexOf","Filterbox","exportMetadata","filteredMetadata","obj","push","filterDataToExportCSV","document","getElementsByClassName","click","parseOK","query2","applyFilter","resetFilter","options","search","newData","process","arr","query","customRenderCompletionItem","self","data","pick","className","type","fontWeight","fontSize","onParseOk","expressions","onParseError","ReactFilterBox","editorConfig","lineWrapping","ButtonGroup","variant","Button","onClick","FilterPane","spacing","allFilter","InfoFields","infos","prompts","linkStyle","InfoList","info","Fragment","uuid","parseInt","startsWith","href","rel","substring","justifyContent","wrap","InfoPane","CustomToggleButton","styled","ToggleButton","_ref","theme","border","backgroundColor","ViewPane","handleChange","prevState","handleChangeGrey","handleScaleChange","scaleValue","handleChangeScale","handleSelectChange","newclusterColor","clusterColor","handleChangeCluster","filterGrey","scaleMin","clusters","alignItems","ToggleButtonGroup","size","fullWidth","exclusive","marginTop","Box","MappingsPane","handleSelectAlgorithm","handleSelectDataset","e","v","selectAlgorithm","selectDataset","algorithm_options","algorithm_choice","dataset_options","selectedDataset","option","Projection","handleResize","camera","aspect","updateProjectionMatrix","renderer","setSize","current_scale","getScaleFromZ","z","d3_x","x","d3_y","y","resize_transform","d3","translate","scale","view","mount","d3_zoom","transform","updateProjection","ar","filterAr","ranges","ar_sliced","sprite_number","start","sprite_size","end","slice","c","points","scene","geometry","attributes","filteredActive","THREE","needsUpdate","updatePass2Shader","num","material","uniforms","greyTransparency","imageTransparency","updateClusterColors","clusterSelected","numVertices","clusterColors","total","clustersAr_sliced","cluster_unique","l","clusterId","cluster_int","random","cluster","clusterActive","loadTiles","tilesLoaded","init","pointsAr","addPoints","setupCamera","animate","getZFromScale","changeEmbeddings","sprite_side","tile_locations","n","sprite_dir","datasetIMG","src","img","createElement","new_choice","embedding_chunks","mappings","echunk","array","tween","TWEEN","to","easing","Linear","None","onUpdate","zoomScaler","input","domain","clamp","scaleProj","rvFOV","degToRad","fov","tan","camera_z_position","fov_height","zoomHandler","d3_transform","k","set","new_size","point_group","camera_z_start","embeddings_data","vFOV","min_x","max_x","ys","min_y","max_y","max_x_from_center","m","abs","max_y_from_center","far","scaleExtent","on","call","initial_scale","initial_transform","loader","textures","t","load","w","flipY","magFilter","vertices","embedding","vert","positionAr","offsetAr","clusterAr","addAttribute","texture_subsize","sprite_image_size","sprite_actual_size","clusterList","clusterTypeSelected","includes","texture","repeat","vertex_shader","fragment_shader","vertexShader","fragmentShader","transparent","point_cloud","userData","sprite_index","add","addBlankHighlightPoints","hover_container","point","frustumCulled","visible","highlightPoint","digit_index","full_index","offsets","copyVector3sArray","offset","removeHighlights","highlight_container","highlights","remove","checkIntersects","mouse_position","previewPane_ctx","mouse_vector","mouseX","mouseY","mouseToThree","raycaster","setFromCamera","params","Points","threshold","intersects","intersectObjects","sorted_intersects","sortIntersectsByDistanceToRay","intersect","object","undefined","setHoverIndex","clearRect","fillRect","fillStyle","drawImage","error","handleMouse","domElement","node","clickOnImage","preserveDrawingBuffer","alpha","setClearColor","autoClear","appendChild","requestAnimationFrame","clear","greyRenderTypeSelected","scaleMax","componentWillUnmount","removeChild","tileProgress","allTiles","_Fragment","CircularProgress","overflow","Layout","newArr","update","A","B","currentFilter","currentSearch","refProjection","toggleControl","collapsedControl","toggleObject","collapsedObject","ww","wh","previewPane_height","controlPane_height","filterPane_height","setDefaults","algorithm_name","window","addEventListener","setRenderer","val","handleChangeZoom","addToUrl","p","changeDataset","innerWidth","innerHeight","previewPane_mount","offsetHeight","imageSmoothingEnabled","canvas","ctx","getContext","url_prefix","filename","alt","removeEventListener","url","link_URL","open","err","main_style","background","general_style","lineHeight","displayNumb","right","top","maxHeight","zIndex","controlMenu_mount","ProSidebar","collapsed","Menu","iconShape","MenuItem","FaAngleDoubleLeft","FaAngleDoubleRight","SubMenu","defaultOpen","title","icon","FaDatabase","grem","font_size","FaEye","FaSlidersH","FaSearch","left","FaRegImage","FaInfo","FaQuestion","datasetDir","initPath","Data","dataset_dirs","defaultDataset","scaleEmbeddings","embeddings","queryString","location","urlParams","URLSearchParams","get","loadInit","loadPrompts","loadConfig","path","loadSettings","loadMetadata","prepareMappings","ID","loadDataset","fetch","file","then","response","json","scaled_embeddings","paramName","navigate","toString","prepareDatasets","directory","choice","newDataset","default","foundInitDataset","floatColorConvertedArr","myColorFunction","rgb","_objectSpread","withRouter","useParams","useNavigate","App","BrowserRouter","Routes","Route","exact","WithRouter","Boolean","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b1bcb955.chunk.js","sourcesContent":["import React, { Component } from 'react'\n\nclass PreviewPane extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dimensions: {},\n      imgURL: null,\n      previewImage: true,\n      timeoutId: null\n    };\n    // this.onImgLoad = this.onImgLoad.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.setPreviewPaneCanvas(this.side_canvas);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.hover_index !== prevProps.hover_index) {\n      this.setState({ previewImage: false });\n      clearTimeout(this.state.timeoutId);\n      const timeoutId = setTimeout(() => {\n        this.setState({ previewImage: true });\n      }, 100);\n      this.setState({ timeoutId });\n    }\n  }\n\n  render() {\n    let {\n      previewPane_image_size,\n    } = this.props;\n    // const {width, height} = this.state.dimensions;\n    // var imgWidth = \"auto\";\n    // var imgHeight = \"100%\";\n    // if (width >= height) {\n    //   imgWidth = \"100%\";\n    //   imgHeight = \"auto\"\n    // };\n\n    return (\n      <div>\n      <div style={{position: \"absolute\", width: previewPane_image_size, height: previewPane_image_size, textAlign: \"center\"}}>\n        <span style={{display: \"inline-block\", height: \"100%\", verticalAlign: \"top\"}}/>\n\n      {this.state.previewImage === true ? this.props.setPreviewImage() : null}\n      \n      </div>\n        <canvas \n          ref={side_canvas => {\n            this.side_canvas = side_canvas\n          }}\n          width={previewPane_image_size}\n          height={previewPane_image_size}\n        />\n      </div>\n    )\n  }\n}\nexport default React.memo(PreviewPane)\n","import React, { Component } from 'react'\nimport { Checkbox, FormControlLabel, Typography, TextField, Tooltip, Slider, Grid, Box } from \"@material-ui/core\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nconst styles = {\n  markLabel: {\n    color: 'white',\n  },\n  markLabelChecked: {\n    color: 'grey',\n  },\n  slider: {\n    color: 'primary',\n  },\n  sliderChecked: {\n    color: 'grey',\n  },\n};\n\nclass SingleSlider extends Component {\n  state = {\n    val_min: this.props.range[0],\n    val_max: this.props.range[1],\n    value: this.props.range[0],\n    checkboxChecked: true,\n  };\n\n  handleUpdate = (event, newValue) => {\n    this.setState({ value: newValue , checkboxChecked: false});\n    this.props.onChangeSlider(this.props.id, newValue);\n    console.log(\"SingleSlider: handleUpdate: \", newValue);\n  };\n\n  handleCheckbox = (event) => {\n    this.setState({ checkboxChecked: event.target.checked });\n    this.props.onChangeCheckbox(this.props.id, event.target.checked);\n    console.log(\"SingleSlider: handleCheckbox: \", event.target.checked);\n  }\n\n  render() {\n    const { val_min, val_max, checkboxChecked } = this.state;\n    const { classes } = this.props;\n\n    const marks = val_max < 25 \n    ? Array.from({ length: val_max - val_min + 1 }, (_, i) => ({\n        value: i + val_min,\n        label: `${i + val_min}`,\n    }))\n    : Array.from({ length: Math.floor((val_max - val_min) / 10) + 2 }, (_, i) => ({\n      value: i === 0 ? 0 : i * 10 - 1,\n      label: `${i === 0 ? 0 : i * 10 - 1}`,\n  }));\n\n    const markLabelStyle = checkboxChecked ? classes.markLabelChecked : classes.markLabel;\n    const sliderStyle = checkboxChecked ? classes.sliderChecked : classes.slider;\n\n\n    return (\n      <Grid container>\n        <Grid item xs={12} style={{ marginLeft: '6px' }}>\n            <Slider\n                aria-label=\"Instance\"\n                defaultValue={val_min}\n                valueLabelDisplay=\"auto\"\n                shiftStep={1}\n                step={1}\n                marks={marks}\n                classes={{\n                  markLabel: markLabelStyle,\n                  root: sliderStyle,\n                }}\n                min={val_min}\n                max={val_max}           \n                onChange={this.handleUpdate}\n              />\n          </Grid>\n          <Grid item xs={12}>\n            <FormControlLabel\n            control={\n              <Checkbox\n                checked={checkboxChecked}\n                onChange={this.handleCheckbox}\n                name=\"checkbox\"\n                // color=\"primary\"\n                style={{ color: 'white' }}\n              />\n            }\n            label=\"show all\"\n          />\n        </Grid> \n      </Grid>\n    \n    );\n  }\n}\n\nexport default withStyles(styles)(SingleSlider);","import React, { Component } from 'react';\nimport { Grid } from \"@material-ui/core\";\nimport SingleSlider from \"./SingleSlider\";\n\nclass Sliders extends Component {\n  constructor(props) {\n    super(props);\n    this.changeSlider = this.changeSlider.bind(this);\n    this.changeCheckbox = this.changeCheckbox.bind(this);\n    this.slidersAr = this.props.settings.sliders.map(slider => slider.id);\n    this.refSliders = this.slidersAr.reduce((refs, id) => {\n      refs[id] = React.createRef();\n      return refs;\n    }, {});\n    this.filterData = this.slidersAr.reduce((filters, id) => {\n      filters[id] = this.props.metadata.map(item => item[id]);\n      return filters;\n    }, {});\n    this.filtered = {};\n    this.state = {\n      datafilter: this.filterData\n    };\n  }\n\n  changeSlider(componentName, value) {\n    const { metadata, settings, calculateProjection } = this.props;\n    this.filtered[componentName] = new Float32Array(settings[\"total\"]).fill(0);\n    let filteredArr = new Float32Array(settings[\"total\"]);\n\n    metadata.forEach((element, index) => {\n      if (value != element[componentName]) {\n        this.filtered[componentName][index] = 1;\n      }\n    });\n\n    let list = Object.values(this.filtered);\n    let arr = filteredArr.map((_, idx) => list.reduce((max, curr) => max + curr[idx], 0));\n    calculateProjection(arr, \"filter\", true);\n  }\n\n  changeCheckbox = (componentName, isChecked) => {\n    const { metadata, settings, calculateProjection } = this.props;\n    if (isChecked) {\n      // If the checkbox is checked, reset the filter for this component\n      this.filtered[componentName] = new Float32Array(settings[\"total\"]).fill(0);\n    } else {\n      // If the checkbox is not checked, filter based on the slider value\n      this.filtered[componentName] = new Float32Array(settings[\"total\"]).fill(0);\n      metadata.forEach((element, index) => {\n        if (element[componentName] !== this.refSliders[componentName].current.state.value) {\n          this.filtered[componentName][index] = 1;\n        }\n      });\n    }\n\n    let list = Object.values(this.filtered);\n    let arr = new Float32Array(settings[\"total\"]).map((_, idx) => list.reduce((max, curr) => max + curr[idx], 0));\n    calculateProjection(arr, \"filter\", true);\n  }\n\n  render() {\n    const { hover_index, settings } = this.props;\n    const slidersSettings = settings['sliders'];\n    const SliderList = slidersSettings.map((slider) => (\n      // <Grid item key={slider['id']}>\n        <SingleSlider\n          ref={this.refSliders[slider['id']]}\n          datafilter={this.state.datafilter[slider['id']]}\n          // title={slider['title']}\n          id={slider['id']}\n          // info={slider['info']}\n          // typeNumber={slider['typeNumber']}\n          // color={slider['color']}\n          onChangeSlider={this.changeSlider}\n          onChangeCheckbox={this.changeCheckbox}\n          // hover_index={hover_index}\n          // barData={barData[slider['id']]}\n          // calculateProjection={this.props.calculateProjection}\n          // currentProjection={this.props.currentProjection}\n          // settings={settings}\n          // sliderID={slider['id']}\n          // metadata={this.props.metadata}\n          range={[slider['min'], slider['max']]}\n        />\n      // </Grid>\n    ));\n\n    return (\n      <Grid container>\n        {SliderList}\n      </Grid>\n    );\n  }\n}\n\nexport default Sliders\n","import React, { Component } from 'react'\nimport Sliders from \"./Sliders/Sliders\";\n\nclass SliderPane extends Component {\n  constructor(props) {\n    super(props);\n    this.sliderReset = this.sliderReset.bind(this);\n  }\n\n  sliderReset() {\n    console.log(\"reset range sliders\");\n  }\n\n  render() {\n    let {\n      metadata,\n      hover_index,\n    } = this.props;\n\n    return (\n      <Sliders\n        metadata={metadata}\n        settings={this.props.settings}\n        hover_index={hover_index}\n        barData={this.props.barData}\n        filterImageAr={this.props.filterImageAr}\n        calculateProjection={this.props.calculateProjection}\n        currentProjection={this.props.currentProjection}\n      />\n    )\n  }\n}\n\nexport default React.memo(SliderPane)","import React, { Component } from 'react'\nimport  _ from \"lodash\";\nimport { Button, ButtonGroup } from \"@material-ui/core\";\nimport ReactFilterBox, {SimpleResultProcessing, GridDataAutoCompleteHandler} from \"react-filter-box\";\nimport \"./filter-box.css\";\n\n//Extend this class to add your custom operator\n// class CustomAutoComplete extends GridDataAutoCompleteHandler {\n//     // Override this method to add new your operator\n//     needOperators(parsedCategory) {\n//         var result = super.needOperators(parsedCategory);\n//         return result.concat([\"startsWith\"]);\n//     }\n// }\n\nclass CustomResultProcessing extends SimpleResultProcessing {\n    // Override this method to add your handler for startsWith operator\n    filter(row, fieldOrLabel, operator, value){\n        var field = this.tryToGetFieldCategory(fieldOrLabel);\n        switch(operator){\n            case \"==\": return row[field] === value;\n            case \"!=\": return row[field] !== value;\n            case \"contains\": return row[field] && row[field].toLowerCase().indexOf(value.toLowerCase()) >=0;\n            case \"!contains\": return row[field] && row[field].toLowerCase().indexOf(value.toLowerCase()) <0;\n            default: return false;\n        }\n    }\n    }\n\nclass Filterbox extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            parseOK: true,\n            query2: {}\n        };\n        this.applyFilter = this.applyFilter.bind(this);\n        this.resetFilter = this.resetFilter.bind(this);\n        this.options = this.props.settings.search;\n        // this.customAutoComplete = new CustomAutoComplete(this.props.metadata,this.options);\n        // this.editorConfig = {\n        //     direction: \"rtl\"\n        // };\n    }\n\n    applyFilter() {\n        var newData = new CustomResultProcessing(this.options).process(this.props.metadata, this.state.query2);\n        var arr = new Float32Array(this.props.settings[\"total\"]).fill(1);\n        newData.forEach(element => {\n            arr[element[\"index\"]] = 0;\n        });     \n        this.props.calculateProjection(arr, \"search\", true);\n    }\n\n    resetFilter() {\n        this.setState({ query: null, query2: '' });\n        var arr = new Float32Array(this.props.settings[\"total\"]).fill(0);\n        this.props.calculateProjection(arr, \"search\", true);\n    }\n\n    //customer your rendering item in auto complete\n    customRenderCompletionItem(self, data, pick) {\n        var className = `hint-value cm-${data.type}`\n        return <div className={className} >\n                    <span style={{ fontWeight: \"bold\" }}>{data.value}</span>\n                    <span style={{color:\"gray\", fontSize:10}}> [{data.type}] </span>\n                </div>\n    }\n\n    onParseOk(expressions) {\n        this.setState({ parseOK: false });\n        this.setState({ query2: expressions });\n        // this.applyFilter(expressions);\n    }\n\n    onParseError(expressions) {\n        this.setState({ parseOK: true });\n    }\n    \n    exportMetadata = () => {\n        var filteredMetadata = [];\n        for (let i = 0; i < this.props.metadata.length; i++) {\n          if (this.props.currentProjection[i] === 0) {\n            var obj = this.props.metadata[i];\n            filteredMetadata.push(obj);\n          }\n        }\n        this.setState(\n          { filterDataToExportCSV: filteredMetadata },\n          () => {\n            document.getElementsByClassName('hidden')[0].click();\n          }\n        );\n      };\n      \n\n    render() {\n        return (\n        <div className=\"main-container\">\n            <ReactFilterBox\n                // autoCompleteHandler = {this.customAutoComplete}\n                customRenderCompletionItem = {this.customRenderCompletionItem.bind(this) }\n                query={this.state.query}\n                data={this.props.metadata}\n                options={this.options}\n                onParseOk={this.onParseOk.bind(this) }\n                onParseError={this.onParseError.bind(this) }\n                editorConfig={{ lineWrapping: true }}\n            />\n\n            <ButtonGroup variant=\"contained\">\n            <Button onClick={this.applyFilter}>apply</Button>\n            <Button onClick={this.resetFilter}>reset</Button>\n            </ButtonGroup>\n\n        </div>\n        )\n    }\n}\n\nexport default Filterbox","import React, { Component } from 'react'\nimport { Grid } from \"@material-ui/core\";\n//import _ from \"lodash\";\nimport Filterbox from \"./QueryFilter\";\n\nclass FilterPane extends Component {\n\n  render() {\n    let {\n      metadata,\n      settings,\n    } = this.props\n\n    return (\n      <Grid container spacing={2}>\n        <Filterbox \n          calculateProjection={this.props.calculateProjection}\n          settings={settings}\n          metadata={metadata}\n          currentProjection={this.props.currentProjection}\n          allFilter={this.props.allFilter}\n        />\n      </Grid>\n    )\n  }\n}\n\nexport default React.memo(FilterPane)","import React, { Component, Fragment } from 'react'\nimport { Grid } from \"@material-ui/core\";\nimport uuid from 'react-uuid';\n\nclass InfoFields extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    render() {\n        let {\n            metadata,\n            hover_index,\n            infos,\n            prompts\n        } = this.props;\n\n        const linkStyle = {\n            color: 'CornflowerBlue'\n        };\n        \n\n        const InfoList = infos.map((info) => \n            <Fragment>\n                <Grid key={uuid()} item xs={4}>\n                    {info}:\n                </Grid>\n                <Grid key={uuid()} item xs={8}>   \n                    {info === 'prompt' ? prompts[parseInt(metadata[hover_index][info])] : (typeof metadata[hover_index][info] === 'string' && metadata[hover_index][info].startsWith('http')) ? <a href={metadata[hover_index][info]} target=\"_blank\" rel=\"noreferrer\" style={linkStyle}>{metadata[hover_index][info].substring(8,30)}...</a> : metadata[hover_index][info]}\n                </Grid>\n            </Fragment>\n        )\n\n        return (\n            <Grid key={uuid()} container justifyContent=\"space-between\" spacing={1} wrap=\"wrap\">    \n                {/* <Grid key={uuid()} item xs={12}>   \n                    <b>{metadata[hover_index].Title}</b>\n                </Grid> */}\n                {InfoList}\n\n            </Grid>\n        );\n    }\n}\n\nexport default InfoFields","import React, { Component } from 'react'\nimport InfoFields from \"./InfoFields\";\n\nclass InfoPane extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      dimensions: {},\n    };\n  }\n\n  render() {\n    let {\n      hover_index,\n      infos,\n      metadata,\n      prompts\n    } = this.props;\n\n    return (\n      <InfoFields\n      metadata={metadata}\n      hover_index={hover_index}\n      infos={infos}\n      prompts={prompts}\n      />\n      \n    )\n\n  }\n}\n\nexport default React.memo(InfoPane)\n","import React, { Component } from 'react'\nimport { Grid, Slider, Box } from \"@material-ui/core\";\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport { styled } from '@mui/material/styles';\n\nconst CustomToggleButton = styled(ToggleButton)(({ theme }) => ({\n  color: 'black',\n  border: '1px solid black', // Add border to the button\n  '&.Mui-selected': {\n    backgroundColor: '#3f51b5', // Darker blue color\n    color: 'white',\n    border: '1px solid black', // Add border to the selected button\n  },\n  '&:not(.Mui-selected)': {\n    backgroundColor: 'grey',\n    border: '1px solid black', // Add border to the non-selected button\n  },\n}));\n\nclass ViewPane extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      dimensions: {},\n      checked: this.props.filterGrey,\n      scaleValue: this.props.scaleMin,\n      clusterColor: 'disabled',\n      // zoomValue: this.props.scaleMax\n    }\n  }\n\n  handleChange = () => {\n    this.setState(prevState => ({\n      checked: !prevState.checked\n    }));\n    this.props.handleChangeGrey(this.state.checked ? 1 : 0);\n  }\n\n  handleScaleChange = (event, newValue) => {\n    this.setState({ scaleValue: newValue });\n    this.props.handleChangeScale(event, newValue);\n  };\n\n  handleSelectChange = (event, newclusterColor) => {\n    if (newclusterColor !== null) {\n      this.setState({ clusterColor: newclusterColor });\n      this.props.handleChangeCluster(event, newclusterColor);\n    }\n    // this.props.handleChangeCluster;\n  }\n\n  // handleZoomChange = (event, newValue) => {\n  //   this.setState({ zoomValue: newValue });\n  //   this.props.handleChangeZoom(event, newValue);\n  // };\n\n  render() {\n    let {\n      clusters\n    } = this.props\n\n    return (\n      <Grid container>\n        <Grid container alignItems=\"center\">\n          <Grid item xs={4}>\n            coloring:\n          </Grid>\n          <Grid item xs={8}>\n            {/* <select onChange={this.props.handleChangeCluster}>\n              <option key=\"0\" value=\"disabled\">-</option>\n              {clusters['clusterList'].map((option, index) => (\n              <option key={option} value={option}>\n                  {option.toLowerCase()}\n              </option>\n              ))}\n            </select>  */}\n            <ToggleButtonGroup\n            size=\"small\"\n            fullWidth\n\n                value={this.state.clusterColor}\n                exclusive\n                onChange={this.handleSelectChange}\n              aria-label=\"text clusterColor\"\n            >\n              <CustomToggleButton value=\"disabled\">none</CustomToggleButton>\n              <CustomToggleButton value=\"category\">fruit</CustomToggleButton>\n              <CustomToggleButton value=\"style\">style</CustomToggleButton>\n           </ToggleButtonGroup>\n           </Grid>\n          </Grid>\n          <Grid container alignItems=\"center\" style={{ marginTop: '12px' }}>\n          <Grid item xs={4}>\n            size:\n          </Grid>\n          <Grid item xs={8}>\n          <Box height={10}>\n          <Slider\n            size=\"small\"\n            value={this.state.scaleValue}\n            min={8}\n            max={80}\n            onChange={this.handleScaleChange}\n          />\n          </Box>\n          </Grid>\n          </Grid>\n          {/* <Grid item xs={4}>\n          size (in):\n          </Grid> */}\n          {/* <Grid item xs={8}> */}\n          {/* <Box height={10}>\n          <Slider\n            size=\"small\"\n            value={this.state.zoomValue}\n            min={3}\n            max={400}\n            onChange={this.handleZoomChange}\n          />\n          </Box> */}\n          {/* </Grid> */}\n\n          {/* <Grid item xs={11}>\n          show filtered-out items (slower):\n          </Grid>\n          <Grid item xs={1}>\n            <input type=\"checkbox\" \n            checked={this.state.checked} \n            onChange={this.handleChange}\n            />\n          </Grid> */}\n\n      </Grid>\n    )\n  }\n}\n\nexport default React.memo(ViewPane)\n","import React, { Component } from 'react'\nimport { Grid } from \"@material-ui/core\";\n\nclass MappingsPane extends Component {\n  constructor(props) {\n    super(props)\n    this.handleSelectAlgorithm = this.handleSelectAlgorithm.bind(this);\n    this.handleSelectDataset = this.handleSelectDataset.bind(this);\n  }\n\n  handleSelectAlgorithm(e) {\n    let v = e.target.value;\n    this.props.selectAlgorithm(v);\n  }\n\n  handleSelectDataset(e) {\n    let v = e.target.value;\n    this.props.selectDataset(v);\n  }\n\n  render() {\n    let {\n      algorithm_options,\n      algorithm_choice,\n      dataset_options,\n      selectedDataset,\n      // datasetInfo\n    } = this.props;\n\n    return (\n      \n      <Grid container spacing={1}>\n          <Grid item xs={4}>\n            Dataset:\n          </Grid>\n          <Grid item xs={8}>\n            <select className=\"full-width\"\n              onChange={this.handleSelectDataset}\n              value={selectedDataset}\n            >\n              {dataset_options.map((option, index) => (\n              <option key={option} value={option}>\n                  {option}\n              </option>\n              ))}\n            </select>\n          </Grid>\n\n          <Grid item xs={4}>\n            Projection:\n          </Grid>\n          <Grid item xs={8}>\n            <select className=\"full-width\"\n              onChange={this.handleSelectAlgorithm}\n              value={algorithm_options[algorithm_choice]}\n            >\n              {algorithm_options.map((option, index) => (\n              <option key={option} value={option}>\n                  {option}\n              </option>\n              ))}\n            </select>\n          </Grid>\n          {/* <Grid item xs={12}>\n          <p className=\"info\">{datasetInfo}</p>\n          </Grid> */}\n      </Grid>\n    )\n  }\n}\n\nexport default React.memo(MappingsPane)","import React, { Component } from 'react'\nimport { Grid, Button } from \"@material-ui/core\";\n\nclass LinkPane extends Component {\n  openInNewTab = (url) => {\n    window.open(url, '_blank', 'noopener,noreferrer');\n  };\n\n  render() {\n    return (\n      <Grid container spacing={1} justify=\"center\" alignItems=\"center\">\n        <Grid item>\n          <Button variant=\"text\" onClick={() => this.openInNewTab('http://link1.com')} style={{ color: 'white' }}>Paper</Button>\n        </Grid>\n        <Grid item>\n          <Button variant=\"text\" onClick={() => this.openInNewTab('http://link2.com')} style={{ color: 'white' }}>Data</Button>\n        </Grid>\n        <Grid item>\n          <Button variant=\"text\" onClick={() => this.openInNewTab('http://link3.com')} style={{ color: 'white' }}>Code</Button>\n        </Grid>\n      </Grid>\n    )\n  }\n}\n\nexport default React.memo(LinkPane)\n","import React, { Component } from 'react'\nimport * as THREE from 'three'\nimport * as _ from 'lodash'\nimport * as d3 from 'd3'\nimport * as TWEEN from '@tweenjs/tween.js'\nimport { CircularProgress } from \"@material-ui/core\";\n\nclass Projection extends Component {\n  constructor(props) {\n    super(props)\n    this.loadTiles()\n    this.state = {\n      tilesLoaded: 0,\n      view: null\n    }\n    this.init = this.init.bind(this)\n    this.pointsAr = []\n    this.addPoints = this.addPoints.bind(this)\n    this.handleResize = this.handleResize.bind(this)\n    this.setupCamera = this.setupCamera.bind(this)\n    this.animate = this.animate.bind(this)\n    this.getScaleFromZ = this.getScaleFromZ.bind(this)\n    this.getZFromScale = this.getZFromScale.bind(this)\n    this.changeEmbeddings = this.changeEmbeddings.bind(this)\n  }\n\n  loadTiles(){ \n    this.sprite_size = this.props.settings.sprite_side * this.props.settings.sprite_side\n    this.tile_locations = [...Array(this.props.settings.sprite_number)].map(\n      (n, i) => `${process.env.PUBLIC_URL}/datasets/${this.props.settings.sprite_dir}/tile_${i}.png`\n    )  \n    this.datasetIMG = this.tile_locations.map(src => {\n      let img = document.createElement('img')\n      img.src = src\n      return img\n    })\n  }\n\n  //changeEmbeddings(prev_choice, new_choice) {\n  changeEmbeddings(new_choice) {\n    let ranges = []\n    for (let i = 0; i < this.props.settings.sprite_number; i++) {\n      let start = i * this.sprite_size\n      let end = (i + 1) * this.sprite_size\n      if (i === this.props.settings.sprite_number - 1) end = this.props.settings.sprite_number * this.sprite_size\n      ranges.push([start, end])\n    }\n\n    let embedding_chunks = ranges.map(range =>\n      this.props.mappings[new_choice].slice(\n        range[0],\n        range[1]\n      )\n    )\n\n    for (let c = 0; c < this.props.settings.sprite_number; c++) {\n      let echunk = embedding_chunks[c]\n\n      let points = this.scene.children[0].children[c]\n      let numVertices = echunk.length\n\n      let position = points.geometry.attributes.position.array\n      let target = new Float32Array(numVertices * 3)\n      for (let i = 0, index = 0, l = numVertices; i < l; i++, index += 3) {\n        let x = echunk[i][0]\n        let y = echunk[i][1]\n        let z = 0\n        target[index] = x\n        target[index + 1] = y\n        target[index + 2] = z\n      }\n\n      let tween = new TWEEN.Tween(position)\n        .to(target, 1000)\n        .easing(TWEEN.Easing.Linear.None)\n      tween.onUpdate(function() {\n        points.geometry.attributes.position = new THREE.BufferAttribute(\n          position,\n          3\n        )\n        points.geometry.attributes.position.needsUpdate = true // required after the first render\n      })\n      tween.start();\n    }\n  }\n\n  zoomScaler(input) {\n    let scaleProj = d3\n    .scaleLinear()\n    .domain([20,0])\n    .range([this.props.scaleMin, this.props.scaleMin])\n    .clamp(true);\n    return scaleProj(input);\n  }\n\n  getZFromScale(scale) {\n    let rvFOV = THREE.Math.degToRad(this.camera.fov);\n    let scale_height = this.props.height / scale;\n    let camera_z_position = scale_height / (2 * Math.tan(rvFOV / 2));\n    return camera_z_position;\n  }\n\n  getScaleFromZ(camera_z_position) {\n    let rvFOV = THREE.Math.degToRad(this.camera.fov);\n    let half_fov_height = Math.tan(rvFOV / 2) * camera_z_position;\n    let fov_height = half_fov_height * 2;\n    let scale = this.props.height / fov_height;\n    return scale;\n  }\n\n  handleResize = (width, height) => {\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize(width, height);\n    let current_scale = this.getScaleFromZ(this.camera.position.z);\n    let d3_x = -(this.camera.position.x * current_scale) + this.props.width / 2;\n    let d3_y = this.camera.position.y * current_scale + this.props.height / 2;\n    var resize_transform = d3.zoomIdentity\n      .translate(d3_x, d3_y)\n      .scale(current_scale);\n    let view = d3.select(this.mount);\n    this.d3_zoom.transform(view, resize_transform);\n  }\n\n  zoomHandler() {\n    let d3_transform = d3.event.transform;\n    let scale = d3_transform.k;\n    let x = -(d3_transform.x - this.props.width / 2) / scale;\n    let y = (d3_transform.y - this.props.height / 2) / scale;\n    let z = this.getZFromScale(scale);\n    this.camera.position.set(x, y, z);\n    // point size scales at end of zoom\n    let new_size = this.zoomScaler(z);\n    let point_group = this.scene.children[0].children;\n    for (let c = 0; c < point_group.length; c++) {\n      point_group[c].material.uniforms.size.value = new_size;\n    }\n  }\n\n  setupCamera() {\n    let { width, height, embeddings_data } = this.props\n\n    let vFOV = this.camera.fov\n    let rvFOV = THREE.Math.degToRad(vFOV)\n\n    let xs = embeddings_data.map(e => e[0])\n    let min_x = _.min(xs)\n    let max_x = _.max(xs)\n    let ys = embeddings_data.map(e => e[1])\n    let min_y = _.min(ys)\n    let max_y = _.max(ys)\n\n    let max_x_from_center = _.max([min_x, max_x].map(m => Math.abs(m)))\n    let max_y_from_center = _.max([min_y, max_y].map(m => Math.abs(m)))\n\n    let max_center = Math.max(max_x_from_center, max_y_from_center)\n\n    let camera_z_start\n    // if (data_aspect > aspect) {\n    //   // console.log(\"width is limiter\");\n    //   // camera_z_start = max_x_from_center / Math.tan(rvFOV / 2) / aspect\n    // } else {\n    //   // console.log(\"height is limiter\");\n    //   // camera_z_start = max_y_from_center / Math.tan(rvFOV / 2)\n    // }\n\n    camera_z_start = max_center / Math.tan(rvFOV / 2)\n\n    let far = camera_z_start * 1.5\n    this.camera.far = far\n    this.camera.position.z = camera_z_start * 1.1\n\n    // set up zoom\n    this.d3_zoom = d3\n      .zoom()\n      .scaleExtent([this.getScaleFromZ(far - 1), this.getScaleFromZ(0.1)])\n      .on('zoom', this.zoomHandler.bind(this))\n\n    let view = d3.select(this.mount)\n    this.view = view\n    view.call(this.d3_zoom)\n    let initial_scale = this.getScaleFromZ(this.camera.position.z)\n    var initial_transform = d3.zoomIdentity\n      .translate(width / 2, height / 2)\n      .scale(initial_scale)\n    this.d3_zoom.transform(view, initial_transform)\n    this.setState({ view: view })\n  }\n\n  addPoints() {\n    let { embeddings_data,metadata } = this.props;\n\n    // split embeddings and labels into chunks to match sprites\n    let ranges = [];\n    for (let i = 0; i < this.props.settings.sprite_number; i++) {\n      let start = i * this.sprite_size;\n      let end = (i + 1) * this.sprite_size;\n      if (i === this.props.settings.sprite_number - 1) end = this.props.settings.sprite_number * this.sprite_size;\n      ranges.push([start, end]);\n    }\n    let embedding_chunks = ranges.map(range =>\n      embeddings_data.slice(range[0], range[1])\n    );\n\n    // load the textures\n    let loader = new THREE.TextureLoader();\n    this.textures = this.tile_locations.map(l => {\n      let t = loader.load(l,\n        function ( w ) {\n          this.setState({ tilesLoaded: this.state.tilesLoaded+1 });\n        }.bind(this)\n      )\n      t.flipY = false\n      t.magFilter = THREE.NearestFilter\n      return t\n    })  \n    let geometry;\n    let point_group = new THREE.Group();\n    for (let c = 0; c < this.props.settings.sprite_number; c++) {\n      let echunk = embedding_chunks[c];\n      //let lchunk = label_chunks[c]\n\n      let vertices = [];\n      for (let v = 0; v < echunk.length; v++) {\n        let embedding = echunk[v];\n        let vert = new THREE.Vector3(embedding[0], embedding[1], 0);\n        vertices[v] = vert;\n      }\n\n      geometry = new THREE.BufferGeometry();\n\n      let numVertices = vertices.length;\n      // console.log(\"numVertices -->\",numVertices)\n      let positionAr = new Float32Array(numVertices * 3);\n      let offsetAr = new Float32Array(numVertices * 2);\n      let clusterAr = new Float32Array(numVertices * 3);\n      let filterAr = new Float32Array(numVertices );\n      //let clustersActive = new Float32Array(numVertices );\n      geometry.addAttribute('position', new THREE.BufferAttribute(positionAr, 3));\n      geometry.addAttribute('offset', new THREE.BufferAttribute(offsetAr, 2));\n      geometry.addAttribute('filter', new THREE.BufferAttribute(filterAr, 1));\n      geometry.addAttribute('cluster', new THREE.BufferAttribute(clusterAr, 3));\n      //geometry.addAttribute('clusterActive', new THREE.BufferAttribute(clustersActive, 1));\n\n      for (let i = 0, index = 0, l = numVertices; i < l; i++, index += 3) {\n        let x = echunk[i][0];\n        let y = echunk[i][1];\n        let z = 0;\n        positionAr[index] = x;\n        positionAr[index + 1] = y;\n        positionAr[index + 2] = z;\n      }\n      // geometry.attributes.position.copyVector3sArray(vertices)\n\n      let texture_subsize = 1 / this.props.settings.sprite_side;\n\n      for (let i = 0, index = 0, l = numVertices; i < l; i++, index += 2) {\n        let x = ((i % this.props.settings.sprite_side) * this.props.settings.sprite_image_size) / this.props.settings.sprite_actual_size\n        let y =\n          (Math.floor(i / this.props.settings.sprite_side) * this.props.settings.sprite_image_size) / this.props.settings.sprite_actual_size\n        offsetAr[index] = x;\n        offsetAr[index + 1] = y;\n      }\n      if (this.props.settings.clusters.clusterList) {\n        // Todo: connect cluster the array\n        let clusterSelected = this.props.clusterTypeSelected;\n        let clusterColors = this.props.settings.clusters.clusterColors;\n        // console.log(\"clusterSelected\",clusterSelected)\n        for (let i = 0, index = 0, l = numVertices; i < l; i++, index += 1) {\n          // Images disable when are not visible\n          filterAr[index] = 0.0;// default value to show all images\n\n          // Clusters visualization\n\n          if( clusterSelected !== \"-\" && this.props.settings.clusters.clusterList.includes(clusterSelected) ){ \n              let clusterId = metadata[index][clusterSelected];\n              if(clusterId >= clusterColors.length){\n                clusterAr[index*3] = 1.0;\n                clusterAr[index*3 + 1] = 1.0;\n                clusterAr[index*3 + 2] = 1.0;\n              }else{\n                clusterAr[index*3] = clusterColors[clusterId][0];\n                clusterAr[index*3 + 1] = clusterColors[clusterId][1];\n                clusterAr[index*3 + 2] = clusterColors[clusterId][2];\n              }\n          }\n      }\n    }\n      // uniforms\n      let uniforms = {\n        texture: { value: this.textures[c] },\n        repeat: { value: new THREE.Vector2(texture_subsize, texture_subsize) },\n        size: { value: this.props.settings.sprite_image_size },\n        greyTransparency:{ value:0.5},\n        imageTransparency:{ value:1.0},\n        clusterActive:{ value:0.0}\n      };\n\n      let vertex_shader = `\n        attribute vec2 offset;\n        varying vec2 vOffset;\n        attribute vec3 cluster;\n        varying vec3 vCluster;\n        attribute float filteredActive;\n        varying float vFilteredActive;\n        uniform float clusterActive;\n        varying float vClusterActive;\n        uniform float size;\n        uniform float greyTransparency;\n        varying float vGreyTransparency;\n        uniform float imageTransparency;\n        varying float vImageTransparency;\n\n        void main() {\n          vOffset = offset;\n          vFilteredActive = filteredActive;\n          vCluster = cluster;\n          vClusterActive = clusterActive;\n          vGreyTransparency = greyTransparency;\n          vImageTransparency = imageTransparency;\n          gl_PointSize = size;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }`;\n\n      let fragment_shader = `\n        uniform sampler2D texture;\n        uniform vec2 repeat;\n        varying vec2 vOffset;\n        varying vec3 vCluster;\n        varying float vClusterActive;\n        varying float vFilteredActive;\n        varying float vGreyTransparency;\n        varying float vImageTransparency;\n        void main() {\n          vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\n          vec4 tex = texture2D( texture, uv * repeat + vOffset );\n          // make transparent images\n          if ( tex.a < 0.003 ) discard;\n\n          // Display clusters\n          vec4 replace_color = vec4(vCluster,1.0);\n          vec4 default_border_color = vec4(0.00392156863,0.00392156863,0.00392156863,0.0);\n          vec4 diff = tex - default_border_color;\n          float equality = float(dot(diff,diff) < 0.99 && vClusterActive > 0.9);\n          tex = mix( tex, replace_color, equality);\n           \n          // make transparent images\n          tex = mix( tex,  vec4(0.0,0.0,0.0,0.0), vImageTransparency);\n\n          // Grey images filter our selection \n          vec4 filterout_color = vec4(0.3,0.3,0.3,vGreyTransparency);\n          float filterout_equality = float(vFilteredActive > 0.9);\n          tex = mix( tex, filterout_color, filterout_equality );\n          gl_FragColor = tex; //* vec4(vColor, 1.0);\n        }`;\n\n      // material\n      let material = new THREE.ShaderMaterial({\n        uniforms: uniforms,\n        vertexShader: vertex_shader,\n        fragmentShader: fragment_shader,\n        transparent: true\n      });\n\n      // point cloud\n      let point_cloud = new THREE.Points(geometry, material);\n      point_cloud.userData = { sprite_index: c };\n      this.pointsAr.push(point_cloud);\n      // console.log(\"new points\")\n      point_group.add(point_cloud);\n    }\n    this.scene.add(point_group);\n  }\n\n  addBlankHighlightPoints() {\n    let hover_container = new THREE.Group();\n    this.scene.add(hover_container);\n\n    let vert = new THREE.Vector3(0, 0, 0);\n    let vertices = [vert];\n    let geometry = new THREE.BufferGeometry();\n    let numVertices = vertices.length;\n    var positionAr = new Float32Array(numVertices * 3); // 3 coordinates per point\n    var offsetAr = new Float32Array(numVertices * 2); // 2 coordinates per point\n    geometry.addAttribute('position', new THREE.BufferAttribute(positionAr, 3));\n    geometry.addAttribute('offset', new THREE.BufferAttribute(offsetAr, 2));\n\n    // all the attributes will be filled on hover\n    let texture_subsize = 1 / this.props.settings.sprite_side;\n\n    // uniforms\n    let uniforms = {\n      texture: { value: this.textures[0] },\n      repeat: { value: new THREE.Vector2(texture_subsize, texture_subsize) },\n      size: { value: 120.0 }, //56\n    };\n\n    let vertex_shader = `\n        attribute vec2 offset;\n        varying vec2 vOffset;\n        uniform float size;\n        void main() {\n          vOffset = offset;\n          gl_PointSize = size;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }`;\n\n    let fragment_shader = `\n        uniform sampler2D texture;\n        uniform vec2 repeat;\n        varying vec2 vOffset;\n        void main() {\n          vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\n          vec4 tex = texture2D( texture, uv * repeat + vOffset );\n          gl_FragColor = tex;\n        }`;\n\n    // material\n    var material = new THREE.ShaderMaterial({\n      uniforms: uniforms,\n      vertexShader: vertex_shader,\n      fragmentShader: fragment_shader,\n      transparent: true,\n    });\n\n    let point = new THREE.Points(geometry, material);\n    point.frustumCulled = false;\n\n    this.scene.children[1].visible = false;\n    this.scene.children[1].add(point);\n  }\n\n  // filter images - update color of images to get inactive (grey) or active images\n  updateProjection=(ar)=>{\n    this.filterAr = ar;\n    let ranges = [];\n    let ar_sliced = [];\n    for (let i = 0; i < this.props.settings.sprite_number; i++) {\n      let start = i * this.sprite_size;\n      let end = (i + 1) * this.sprite_size;\n      if (i === this.props.settings.sprite_number - 1) end = this.props.settings.sprite_number * this.sprite_size;\n      ranges.push([start, end]);\n      ar_sliced.push(ar.slice(start, end));\n    }\n    // \n    for (let c = 0; c < this.props.settings.sprite_number; c++) {\n      let points = this.scene.children[0].children[c];\n      points.geometry.attributes.filteredActive = new THREE.BufferAttribute(\n        ar_sliced[c],\n        1\n      );\n      points.geometry.attributes.filteredActive.needsUpdate = true;\n    }\n    // let point = this.scene.children[0].children[0]\n    // console.log(point.geometry);\n  }\n\n  updatePass2Shader=(num)=>{\n    for (let c = 0; c < this.props.settings.sprite_number; c++) {\n      let points = this.scene.children[0].children[c];\n      if(num===1){\n        points.material.uniforms.greyTransparency.value = 0.5;\n        points.material.uniforms.greyTransparency.needsUpdate = true;\n        points.material.uniforms.imageTransparency.value = 1.0;\n        points.material.uniforms.imageTransparency.needsUpdate = true;\n      }\n      if(num===2){\n        points.material.uniforms.greyTransparency.value = 0.0;\n        points.material.uniforms.greyTransparency.needsUpdate = true;\n        points.material.uniforms.imageTransparency.value = 0.0;\n        points.material.uniforms.imageTransparency.needsUpdate = true;\n      }\n    }\n  }\n\n  updateClusterColors=(clusterSelected)=>{\n    console.log('updateClusterColors',clusterSelected);\n    \n    let numVertices =  this.props.metadata.length;//this.props.settings.sprite_number * this.sprite_size;\n    console.log(\"clusterSelected:\",clusterSelected, \"numVertices Update -->\",numVertices, ' metadata.length:', this.props.metadata.length)\n    let clusters = new Float32Array(numVertices * 3);\n    //let clustersActive = new Float32Array(numVertices );\n    let clusterColors = this.props.settings.clusters.clusterColors;\n    console.log(numVertices,clusterSelected !==\"-\",this.props.settings.total,clusterColors);\n    \n    let ranges = [];\n    // let clustersActiveAr_sliced = [];\n    let clustersAr_sliced = [];\n\n    if( clusterSelected !==\"disabled\" ){\n      let cluster_unique = [];\n      for (let i = 0, index = 0, l = numVertices; i < l; i++, index += 1) {\n          let clusterId = this.props.metadata[index][clusterSelected];\n          // check if clusterId is in cluster_unique\n          if(cluster_unique.indexOf(clusterId) === -1){\n            cluster_unique.push(clusterId);\n          }\n          // get the index of the clusterId in cluster_unique\n          let cluster_int = cluster_unique.indexOf(clusterId);\n          if(cluster_int>=clusterColors.length){\n            // make a random color\n            clusters[index*3] = Math.random();\n            clusters[index*3 + 1] = Math.random();\n            clusters[index*3 + 2] = Math.random();\n          }else{\n            clusters[index*3] = clusterColors[cluster_int][0];\n            clusters[index*3 + 1] = clusterColors[cluster_int][1];\n            clusters[index*3 + 2] = clusterColors[cluster_int][2];\n          }\n          \n      }\n\n      for (let i = 0; i < this.props.settings.sprite_number; i++) {\n        let start = i * this.sprite_size;\n        let end = (i + 1) * this.sprite_size;\n        if (i === this.props.settings.sprite_number - 1) end = this.props.settings.sprite_number * this.sprite_size;\n        ranges.push([start, end]);\n        clustersAr_sliced.push(clusters.slice(start*3, end*3));\n      }\n    }\n    \n    for (let c = 0; c < this.props.settings.sprite_number; c++) {\n      let points = this.scene.children[0].children[c];\n      if( clusterSelected !==\"disabled\" ){\n        points.geometry.attributes.cluster = new THREE.BufferAttribute(\n          clustersAr_sliced[c],\n          3\n        );\n        points.geometry.attributes.cluster.needsUpdate = true;\n        \n        points.material.uniforms.clusterActive.value = 1.0;\n        points.material.uniforms.clusterActive.needsUpdate = true;\n      }else{\n        points.material.uniforms.clusterActive.value = 0.0;\n        points.material.uniforms.clusterActive.needsUpdate = true;\n      }\n    }\n\n\n  }\n\n  highlightPoint(sprite_index, digit_index, full_index) {    \n    let { algorithm_choice, mappings } = this.props;\n\n    let point = this.scene.children[1].children[0];\n\n    // console.log(mappings[algorithm_choice][full_index]);\n    let embedding = mappings[algorithm_choice][full_index];\n\n    let vert = new THREE.Vector3(embedding[0], embedding[1], 0);\n    let vertices = [vert];\n\n    var offsets = new Float32Array(2); // 2 coordinates per point\n\n    let x = ((digit_index % this.props.settings.sprite_side) * this.props.settings.sprite_image_size) / 2048;\n    let y = (Math.floor(digit_index / this.props.settings.sprite_side) * this.props.settings.sprite_image_size) / 2048;\n    offsets[0] = x;\n    offsets[1] = y;\n\n    point.geometry.attributes.position.copyVector3sArray(vertices);\n    point.geometry.attributes.position.needsUpdate = true; // required after the first render\n    point.geometry.attributes.offset.array = offsets;\n    point.geometry.attributes.offset.needsUpdate = true; // required after the first render\n\n    // need to set attributes on geometry and uniforms on material\n    point.material.uniforms.texture.value = this.textures[sprite_index];\n  }\n\n  removeHighlights() {\n    let highlight_container = this.scene.children[1];\n    let highlights = highlight_container.children;\n    highlight_container.remove(...highlights);\n  }\n\n  checkIntersects(mouse_position) {\n    let { width, height, previewPane_ctx, previewPane_image_size } = this.props;\n\n    function mouseToThree([mouseX, mouseY]) {\n      return new THREE.Vector3(\n        (mouseX / width) * 2 - 1,\n        -(mouseY / height) * 2 + 1,\n        1\n      );\n    }\n\n    function sortIntersectsByDistanceToRay(intersects) {\n      return _.sortBy(intersects, 'distanceToRay');\n    }\n\n    let mouse_vector = mouseToThree(mouse_position);\n    this.raycaster.setFromCamera(mouse_vector, this.camera);\n    this.raycaster.params.Points.threshold = 0.9;\n    let intersects = this.raycaster.intersectObjects(\n      this.scene.children[0].children\n    );\n    if (intersects[0]) {\n      let sorted_intersects = sortIntersectsByDistanceToRay(intersects);\n      let intersect = sorted_intersects[0];\n      let sprite_index = intersect.object.userData.sprite_index;\n      let digit_index = intersect.index;\n      let full_index = sprite_index * this.sprite_size + digit_index;\n      // if filter is null then allow selected all, then when filter is defined only allow visible image to be selected\n      if( this.filterAr===undefined || this.filterAr[full_index]<1.0){\n        this.props.setHoverIndex(full_index);\n        // console.log(full_index)\n        this.highlightPoint(sprite_index, digit_index, full_index);\n        this.scene.children[1].visible = true;\n        previewPane_ctx.clearRect(0, 0,  previewPane_image_size, previewPane_image_size);\n        previewPane_ctx.fillRect(0, 0, previewPane_image_size, previewPane_image_size);\n        previewPane_ctx.fillStyle = \"transparent\";\n        try{\n          previewPane_ctx.drawImage(\n            this.datasetIMG[sprite_index],\n            // source rectangle\n            (digit_index % this.props.settings.sprite_side) * this.props.settings.sprite_image_size,\n            Math.floor(digit_index / this.props.settings.sprite_side) * this.props.settings.sprite_image_size,\n            this.props.settings.sprite_image_size,\n            this.props.settings.sprite_image_size,\n            // destination rectangle\n            0,\n            0,\n            previewPane_image_size,\n            previewPane_image_size\n          );\n        }catch (error){\n          console.log(\"previewPane_ctx.drawImage\",error);\n        }\n      }\n    } else {\n      this.props.setHoverIndex(null);\n      this.scene.children[1].visible = false;\n      previewPane_ctx.fillRect(0, 0, previewPane_image_size, previewPane_image_size);\n      previewPane_ctx.fillStyle = \"transparent\";\n    }\n  }\n\n  handleMouse() {\n    let view = d3.select(this.renderer.domElement);\n    this.raycaster = new THREE.Raycaster();\n\n    view.on('mousemove', () => {\n      let [mouseX, mouseY] = d3.mouse(view.node());\n      let mouse_position = [mouseX, mouseY];\n      this.checkIntersects(mouse_position);\n    })\n    \n    view.on('dblclick', () => {\n      if(this.scene.children[1].visible) this.props.clickOnImage();\n    })\n  }\n\n  init() {\n    let { width, height } = this.props;\n    this.scene = new THREE.Scene();\n    let vFOV = 75;\n    let aspect = width / height;\n    let near = 0.01;\n    let far = 1000;\n\n    this.camera = new THREE.PerspectiveCamera(vFOV, aspect, near, far);\n\n    this.renderer = new THREE.WebGLRenderer({ preserveDrawingBuffer: true,alpha: true });\n    this.renderer.setClearColor(0xffffff, 0);\n    this.renderer.autoClear = false;\n    this.renderer.setSize(width, height);\n    this.renderer.domElement.id = \"threeCanvas\";\n    this.mount.appendChild(this.renderer.domElement);\n\n    this.addPoints();\n    this.addBlankHighlightPoints();\n    this.setupCamera();\n    this.animate();\n    this.handleMouse();\n    this.changeEmbeddings(this.props.algorithm_choice);\n  }\n\n  animate() {\n    requestAnimationFrame(this.animate);\n    TWEEN.update();\n    this.renderer.clear()\n    // 1-Pass :: Render filtered images (grey semi-transparent images that create a shadow behind)\n    if(parseInt(this.props.greyRenderTypeSelected)===0){\n      this.updatePass2Shader(1)\n      this.renderer.render(this.scene, this.camera);\n    }\n    // 2-Pass - Render all images\n    this.updatePass2Shader(2)\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  componentDidMount() {\n    this.init();\n  }\n\n  componentDidUpdate(prevProps) {\n    let { width, height } = this.props;\n    if (width !== prevProps.width || height !== prevProps.height) {\n      this.handleResize(width, height);\n    }\n    \n    if (prevProps.algorithm_choice !== this.props.algorithm_choice) {\n      this.changeEmbeddings(\n        //prevProps.algorithm_choice,\n        this.props.algorithm_choice,\n      );\n    }\n    \n    if (this.props.scaleMin !== prevProps.scaleMin || this.props.scaleMax !== prevProps.scaleMax){\n      this.handleResize(width, height);\n    }\n  }\n\n  componentWillUnmount() {\n    this.mount.removeChild(this.renderer.domElement);\n  }\n\n  render() {\n    let { width, height } = this.props;\n    const tileProgress = this.state.tilesLoaded;\n    const allTiles = this.props.settings.sprite_number;\n    return (\n      <><div>\n        {tileProgress < 1 ? <div className=\"loading\"><CircularProgress color=\"inherit\"/><div>loading tiles...</div></div> : \n        tileProgress < allTiles-1 ? <div className=\"loading-small\"><CircularProgress color=\"inherit\"/><div>loading...</div></div> : \n        ''\n      }\n      </div><div\n          style={{ width: width, height: height, overflow: 'hidden' }}\n          ref={mount => {\n            this.mount = mount\n          } } /></>\n    ) \n  }\n}\n\nexport default React.memo(Projection)\n\n\n","import React, { Component } from 'react'\nimport PreviewPane from './PreviewPane'\nimport SliderPane from './SliderPane'\nimport FilterPane from './FilterPane'\nimport InfoPane from './InfoPane'\nimport ViewPane from './ViewPane'\nimport MappingsPane from './MappingsPane'\nimport LinkPane from './LinkPane'\n// import Export from './Export'\nimport { ProSidebar, Menu, MenuItem, SubMenu } from 'react-pro-sidebar';\nimport './scss/Menu.scss';\nimport Projection from './Projection'\nimport * as _ from 'lodash'\nimport { CircularProgress } from \"@material-ui/core\";\nimport { FaDatabase, FaSlidersH, FaSearch, FaCloudDownloadAlt, FaAngleDoubleLeft, FaAngleDoubleRight, FaRegImage, FaInfo, FaQuestion, FaEye } from \"react-icons/fa\";\n\nclass Layout extends Component {\n  constructor(props) {\n    super(props)\n    let total = this.props.settings[\"total\"]\n    this.state = {\n      ww: null,\n      wh: null,\n      hover_index: 64,\n      previewPane_height: null,\n      controlPane_height: null,\n      filterPane_height: null,\n      algorithm_choice: null,\n      allFilter: {},\n      currentProjection: new Float32Array(total).fill(0),\n      currentFilter: new Float32Array(total).fill(0),\n      currentSearch: new Float32Array(total).fill(0),\n      scaleMin: 14,\n      scaleMax: 70,\n      filterGrey: true,\n      clusterTypeSelected:'-',\n      greyRenderTypeSelected:0,\n      dimensions: {},\n      collapsedControl: false,\n      collapsedObject: false\n    }\n    this.previewPane_ctx = null;\n    this.setSize = _.debounce(this.setSize.bind(this), 200);\n    this.setPreviewPaneCanvas = this.setPreviewPaneCanvas.bind(this);\n    this.setPreviewImage = this.setPreviewImage.bind(this);\n    this.selectAlgorithm = this.selectAlgorithm.bind(this);\n    this.selectDataset = this.selectDataset.bind(this);\n    this.toggleControl = this.toggleControl.bind(this);\n    this.refProjection = React.createRef();\n  }\n\n  componentDidMount() {\n    this.setDefaults();\n    this.selectAlgorithm(this.props.algorithm_name);\n    this.setSize();\n    window.addEventListener('resize', this.setSize);\n  }\n\n  setDefaults(){\n    if (this.props.settings[\"total\"] < 20000) {\n      this.setState( { scaleMin: 80, filterGrey: true, greyRenderTypeSelected: 0 } )\n    } else {\n      this.setState( { scaleMin: 15, filterGrey: false, greyRenderTypeSelected: 1 } )\n    }\n  }\n\n  setRenderer(renderer){\n    this.setState( { renderer: renderer});\n  }\n\n  handleChangeScale(e,val) {\n    this.setState({ scaleMin: val})\n  }\n\n  handleChangeZoom(e,val) {\n    this.setState({ scaleMax: val})\n  }\n\n  handleChangeCluster(e) {\n    let value = e.target.value;\n    this.setState({ clusterTypeSelected: parseInt(value)})\n    // console.log(e.target)\n    try{\n      this.refProjection.current.updateClusterColors(value)\n    } catch(error) {console.log(\"error updateClusterColors\")}\n  }\n\n  handleChangeGrey(value) {\n    this.setState({ greyRenderTypeSelected: value})\n  }\n\n  calculateProjection=(newArr,type, update)=>{\n    let A, B, arr;\n    if(type===\"filter\"){\n      this.setState({currentFilter: newArr})\n      A = newArr;\n      B = this.state.currentSearch;\n    }\n    if(type===\"search\"){\n      this.setState({currentSearch: newArr});\n      A = this.state.currentFilter;\n      B = newArr;\n    }\n    if(update){\n      arr = A.map((x, idx) => x + B[idx]);\n      this.setState({currentProjection: arr});\n    } else {\n      arr = newArr;\n    }\n    try{\n      this.refProjection.current.updateProjection(arr);\n    } catch(error) {}\n    }\n\n  selectAlgorithm(v) {\n    let i = this.props.algorithm_options.indexOf(v);\n    if(i<0) i = 0;\n    this.setState({ algorithm_choice: i });\n    // Save algorithm in URL parameters\n    this.props.addToUrl('projection',this.props.algorithm_options[i]);\n  }\n\n  selectDataset(p) {\n    this.props.changeDataset(p);\n  }\n\n  setSize() {\n    this.setState({ ww: window.innerWidth, wh: window.innerHeight });\n    let previewPane_height = this.previewPane_mount.offsetHeight;\n    this.setState({ previewPane_height: previewPane_height });\n    if (this.previewPane_ctx) this.previewPane_ctx.imageSmoothingEnabled = false;\n    if ( window.innerWidth < 900) {\n      this.setState({ collapsedControl: true, collapsedObject: true })\n    } else {\n      this.setState({ collapsedControl: false, collapsedObject: false })\n\n    }\n  }\n\n  setPreviewPaneCanvas(canvas) {\n    let ctx = canvas.getContext('2d');\n    ctx.imageSmoothingEnabled = false;\n    this.previewPane_ctx = ctx;\n    // console.log(ctx);\n    // console.log(this.props.prompts);\n  }\n\n  setPreviewImage() {\n      return (\n      <img\n      src={ this.props.settings.url_prefix + this.props.metadata[this.state.hover_index].filename }\n      alt=\"preview\"\n      style={{\n        verticalAlign: \"middle\",\n      }}\n      />)\n  }\n\n\n  setHoverIndex(hover_index) {\n    if (hover_index != null){\n      this.setState({ hover_index: hover_index });\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.setSize);\n  }\n\n  clickOnImage(){\n    console.log(\"open image\",this.state.hover_index);\n    try{\n      let url = this.props.metadata[this.state.hover_index].link_URL\n      window.open(url, '_blank', 'noopener,noreferrer');\n    }catch(err){}\n  }\n\n  toggleControl = () => {\n    this.setState({ collapsedControl: !this.state.collapsedControl \n  })}\n  \n  toggleObject = () => {\n    this.setState({ collapsedObject: !this.state.collapsedObject \n  })}\n\n\n  render() {\n    let {\n      embeddings_data,\n      mappings,\n      algorithm_options,\n      dataset_options,\n      metadata,\n      settings,\n      // barData\n      prompts\n    } = this.props;\n\n    let {\n      ww,\n      wh,\n      hover_index,\n      algorithm_choice,\n      currentProjection,\n      allFilter,\n      greyRenderTypeSelected,\n      clusterTypeSelected,\n      collapsedControl,\n      collapsedObject\n    } = this.state;\n\n    let previewPane_ctx = this.previewPane_ctx;\n    \n    let line_height = 1.5;\n\n    let previewPane_style = {\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      // width: 320,\n      height: 'auto',\n      maxHeight: '100vh',\n      overflow: 'auto',\n      background: '#222',\n      zIndex: 8\n    };\n    let controlMenu_style = {\n      position: 'absolute',\n      right: 0,\n      top: 0,\n      // width: 300,\n      // left:ww-350,\n      height: 'auto',\n      maxHeight: '100vh',\n      overflow: 'auto',\n      background: '#222',\n      zIndex: 8\n    };\n\n    let main_style = {\n      position: 'relative',\n      background: '#111',\n      overflow: 'hidden',\n      width: ww, \n      height: wh\n    };\n\n    let previewPane_image_size = '320px';\n    let font_size = 16;\n\n    let grem = font_size * line_height;\n\n    let general_style = {\n      fontSize: font_size,\n      lineHeight: line_height,\n    };\n\n    let displayNumb = 0;\n    for(let i=0;i<settings.total;i++){\n      if(currentProjection[i]===0){\n        displayNumb++;\n      }\n    }\n\n\n    return ww !== null ? (\n      <div style={general_style}>\n        <div\n          style={controlMenu_style}\n          ref={controlMenu_mount => {\n            this.controlMenu_mount = controlMenu_mount\n          }}\n        >\n          <div>\n          <ProSidebar collapsed={collapsedControl}>\n            <Menu iconShape='square'>\n            <MenuItem>\n            <h3></h3>\n            <a className=\"collapseCon\" onClick={this.toggleControl}>{collapsedControl ? < FaAngleDoubleLeft />  : < FaAngleDoubleRight /> }</a>\n            </MenuItem>\n\n              <SubMenu defaultOpen\n              title={collapsedControl ? null : \"Data & Projections\"}  \n              icon={collapsedControl ? < FaDatabase />  : null }\n              >\n              <MenuItem>\n              <MappingsPane\n                grem={grem}\n                algorithm_options={algorithm_options}\n                algorithm_choice={algorithm_choice}\n                selectAlgorithm={this.selectAlgorithm}\n                dataset_options={dataset_options}\n                selectDataset={this.selectDataset}\n                selectedDataset={this.props.selectedDataset}\n                // datasetInfo={settings[\"datasetInfo\"]}\n              />\n              </MenuItem>\n              <MenuItem>\n                <p className=\"info\">{settings[\"datasetInfo\"]}\n                  <a href=\"https://style-aligned-artwork-datasets.github.io/\" target=\"_blank\" rel=\"noreferrer\" ><strong> Click to read more...</strong></a>\n                </p>\n               </MenuItem>\n              </SubMenu>\n\n                <SubMenu defaultOpen\n                title={collapsedObject ? null : \"Appearance\"}  \n                icon={collapsedObject ? <FaEye />  : null }\n                > \n                <MenuItem>\n                <ViewPane\n                  clusters={settings.clusters}\n                  scaleMin={this.state.scaleMin}\n                  scaleMax={this.state.scaleMax}\n                  filterGrey={this.state.filterGrey}\n                  handleChangeScale = {this.handleChangeScale.bind(this)}\n                  handleChangeZoom = {this.handleChangeZoom.bind(this)}\n                  handleChangeCluster = {this.handleChangeCluster.bind(this)}\n                  handleChangeGrey = {this.handleChangeGrey.bind(this)}\n                  total = {settings.total}\n                />\n                </MenuItem>\n\n              </SubMenu>\n\n              \n              <SubMenu defaultOpen\n                title={collapsedControl ? null : \"Instance Filter\"}  \n                icon={collapsedControl ? <FaSlidersH />  : null }\n              >\n\n                <MenuItem>\n                <SliderPane\n                  grem={grem}\n                  metadata={metadata}\n                  hover_index={hover_index}\n                  settings={settings}\n                  // barData={barData}\n                  calculateProjection={this.calculateProjection}\n                  currentProjection={currentProjection}\n                  allFilter={allFilter}\n                  />\n                </MenuItem>\n                \n                <MenuItem>\n                <div className='info'>showing {displayNumb} / {settings.total}</div>\n              </MenuItem>\n                </SubMenu>\n\n\n                <SubMenu \n                title={collapsedControl ? null : \"Query Filter\"}  \n                icon={collapsedControl ? < FaSearch />  : null }\n                >\n\n                <MenuItem>\n                  <FilterPane\n                    grem={grem}\n                    calculateProjection={this.calculateProjection}\n                    hover_index={hover_index}\n                    settings={settings}\n                    metadata={metadata}\n                    currentProjection={currentProjection}\n                    allFilter={allFilter}\n                  />\n                </MenuItem>\n              </SubMenu>\n              {/* <SubMenu\n                title={collapsedControl ? null : \"Export Filtered Data\"}  \n                icon={collapsedControl ? <FaCloudDownloadAlt />  : null }\n                >\n\n              <MenuItem>\n                <Export\n                metadata = {metadata}\n                currentProjection = {currentProjection}\n                />\n              </MenuItem>\n            </SubMenu> */}\n            </Menu>\n          </ProSidebar>\n          </div>\n        </div>    \n\n        <div\n          style={previewPane_style}\n          ref={previewPane_mount => {\n            this.previewPane_mount = previewPane_mount\n          }}\n        >\n\n        <div>\n          <ProSidebar collapsed={collapsedObject}>\n            <Menu iconShape='square'>   \n            <MenuItem>\n            {collapsedObject ? <h2></h2> : <h2>fruit-SALAD Explorer</h2> }\n            <a className='collapseObj' onClick={this.toggleObject}>{collapsedObject ? < FaAngleDoubleRight />  : < FaAngleDoubleLeft /> }</a>\n            </MenuItem>\n              <SubMenu defaultOpen\n                title={collapsedObject ? null : \"Preview\"}  \n                icon={collapsedObject ? <FaRegImage />  : null }\n                >  \n                <PreviewPane\n                  previewPane_image_size={previewPane_image_size}\n                  setPreviewPaneCanvas={this.setPreviewPaneCanvas}\n                  setPreviewImage={this.setPreviewImage}\n                  hover_index={hover_index}\n                />\n              </SubMenu>\n              <SubMenu defaultOpen\n                title={collapsedObject ? null : \"Info\"}  \n                icon={collapsedObject ? <FaInfo />  : null }\n                >  \n                <MenuItem>\n                <InfoPane\n                  hover_index={hover_index}\n                  metadata={metadata}\n                  infos={settings.info}\n                  prompts={prompts}\n                />\n                </MenuItem>\n              </SubMenu>\n\n              <SubMenu\n              title={collapsedObject ? null : 'About the data'}  \n              icon={collapsedObject ? <FaQuestion />  : null }\n              >         \n              <div className='about'>\n              fruit-SALAD is a <strong>synthetic image dataset</strong> with 10,000 generated images of fruit depictions. \n              This combined semantic category and style benchmark comprises 100 instances each of 10 easily recognizable fruit categories and 10 easy distinguishable styles. \n              The carefully designed <strong>Style Aligned Artwork Dataset</strong> (SALAD) provides a controlled and balanced platform for the comparative analysis of similarity perception of different computational models. \n              The SALAD framework allows the comparison of how these models perform semantic category and style recognition tasks, going beyond the level of anecdotal knowledge, making them robustly quantifiable and qualitatively interpretable.\n              <a href=\"https://style-aligned-artwork-datasets.github.io/\" target=\"_blank\" rel=\"noreferrer\" ><strong> Click to read more...</strong></a>\n              </div>\n              </SubMenu>\n\n\n            <SubMenu\n              title={collapsedObject ? null : 'About the tool'}  \n              icon={collapsedObject ? <FaQuestion />  : null }\n              >         \n              <div className='about'>\n                The Collection Space Navigator (CSN) is an <strong>interactive visualization interface for multidimensional datasets</strong>.\n                It functions as an explorative visualization tool for researching collections and their multidimensional representations. \n                We designed this tool to better understand multidimensional data, its methods, and semantic qualities through spatial navigation and filtering.\n                CSN can be used with any image collection and can be customized for specific research needs. <a href=\"https://collection-space-navigator.github.io/\" target=\"_blank\" rel=\"noreferrer\" ><strong> Click to read more...</strong></a>\n              </div>\n              </SubMenu>\n            </Menu>\n          </ProSidebar>\n          </div>\n        </div>\n        <div style={main_style}>\n          <Projection\n            ref={this.refProjection}\n            width={main_style.width}\n            height={main_style.height}\n            embeddings_data={embeddings_data}\n            mappings={mappings}\n            metadata={metadata}\n            previewPane_ctx={previewPane_ctx}\n            previewPane_image_size={previewPane_image_size}\n            setHoverIndex={this.setHoverIndex.bind(this)}\n            algorithm_choice={algorithm_choice}\n            datasetDir={this.props.datasetDir}\n            clusterTypeSelected={clusterTypeSelected}\n            greyRenderTypeSelected={greyRenderTypeSelected}\n            settings={settings}\n            initPath={this.props.initPath}\n            scaleMin={this.state.scaleMin}\n            scaleMax={this.state.scaleMax}\n            currentProjection={currentProjection}\n            clickOnImage={this.clickOnImage.bind(this)}\n            // tiles={this.tiles}\n          />\n        </div>\n      </div>\n      \n    ) : (\n      <div className=\"loading\"><CircularProgress color=\"inherit\"/><div>loading layout...</div></div>\n    )\n  }\n}\n\nexport default Layout\n\n\n\n","import React, { Component } from 'react'\nimport {useParams, useNavigate} from \"react-router-dom\";\nimport Layout from './Layout'\nimport * as _ from 'lodash'\nimport * as d3 from 'd3'\nimport color from 'color'\n// import * as THREE from 'three'\nimport { CircularProgress } from \"@material-ui/core\";\n\n\nfunction withRouter(Component) {\n  return props => <Component {...props} params={useParams()} navigate={useNavigate()} />;\n}\n\nclass Data extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // tilesLoaded: 0,\n      algorithm_options: null,\n      dataset_options: null,\n      dataset_dirs: null,\n      embeddings_data: null,\n      mappings: null,\n      metadata:null,\n      defaultDataset:null,\n      algorithm_name:0\n    };\n  }\n\n  scaleEmbeddings(embeddings) {\n    let xs = embeddings.map(e => Math.abs(e[0]));\n    let ys = embeddings.map(e => Math.abs(e[1]));\n    let max_x = _.max(xs);\n    let max_y = _.max(ys);\n    let max = Math.max(max_x, max_y);\n    let scale = d3\n      .scaleLinear()\n      .domain([-max, max])\n      .range([-20, 20]);\n    let scaled_embeddings = embeddings.map(e => [scale(e[0]), scale(e[1])]);\n    return scaled_embeddings;\n  }\n  \n  componentDidMount() {\n    // Get parameters from URL and save to settings\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    this.setState({ selectedDataset: urlParams.get('dataset')});\n    if(urlParams.get('projection')!==undefined) this.setState({algorithm_name:urlParams.get('projection')});\n    // Load embeddings\n    this.loadInit('datasets/datasets_config.json')\n    this.loadPrompts(`datasets/prompts.json`);\n  }\n\n  loadConfig(path){\n    this.loadSettings(`datasets/${path}/config.json`);\n    // this.loadBarData(`datasets/${path}/barData.json`);\n    this.loadMetadata(`datasets/${path}/metadata.json`);\n  }\n  \n  prepareMappings(ID){\n    let algorithm_options = [];\n    for (let i in this.state.settings.embeddings) {\n      console.log(this.state.settings.embeddings[i].name);\n      algorithm_options[i] = this.state.settings.embeddings[i].name;\n    }\n    this.setState({ algorithm_options: algorithm_options });\n  }\n\n  loadDataset(ID){\n    let mappings = [];\n    const embeddings = this.state.settings.embeddings;\n    for (let i in embeddings) {\n      // console.log(embeddings[i].key);\n      fetch(`${process.env.PUBLIC_URL}/datasets/${this.state.datasetDir}/${embeddings[i].file}`)\n        .then(response => response.json())\n        .then(embeddings_data => {\n          let scaled_embeddings = embeddings_data;\n          // this.scaleEmbeddings(embeddings_data);\n          mappings[i] = scaled_embeddings;\n        }\n        )\n        .then(() => {\n          this.setState({ mappings: mappings, embeddings_data: mappings[0] })\n        })\n  }\n}\n\n  // loadTiles(){ \n  //   const tile_locations = [...Array(this.state.settings.sprite_number)].map(\n  //     (n, i) => `${process.env.PUBLIC_URL}/datasets/${this.state.datasetDir}/tile_${i}.png`\n  //   )\n  //   let loader = new THREE.TextureLoader();\n  //   this.tiles = tile_locations.map(l => {\n  //     let t = loader.load(l,\n  //       function ( texture ) {\n  //         this.setState({ tilesLoaded: this.state.tilesLoaded+1 });\n  //       }.bind(this)\n  //     )\n  //     t.flipY = false\n  //     t.magFilter = THREE.NearestFilter\n  //     return t\n  //   })    \n  // }\n\n\n  addToUrl(paramName,value){\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    urlParams.set(paramName, value);\n    this.props.navigate(\"?\"+urlParams.toString());\n  }\n\n  prepareDatasets(ID){\n    let dataset_options = [];\n    let dataset_dirs = [];\n    for (let i in this.state.settings.embeddings) {\n      console.log(this.state.settings.embeddings[i].name);\n      dataset_options[i] = this.state.settings.embeddings[i].name;\n      dataset_dirs[i] = this.state.settings.embeddings[i].directory;\n    }\n    this.setState({ dataset_options: dataset_options, dataset_dirs: dataset_dirs });\n  }\n\n  changeDataset(choice){\n    this.addToUrl('dataset',choice);\n    let k = this.state.dataset_options.indexOf(choice);\n    let newDataset = this.state.dataset_dirs[k]\n    this.setState({ \n      selectedDataset: choice, \n      datasetDir: newDataset,\n      algorithm_options: null,\n      embeddings_data: null,\n      mappings: null,\n      metadata: null\n    });\n    this.loadConfig(newDataset);\n  }\n\n  loadInit(file){\n    fetch(`${process.env.PUBLIC_URL}/`+file)\n      .then(response => response.json())\n      .then(init =>{\n        let dataset_options = [];\n        let dataset_dirs = [];\n        for (let i in init.data) {\n          console.log(init.data[i].directory);\n          dataset_options[i] = init.data[i].name;\n          dataset_dirs[i] = init.data[i].directory;\n        }\n        this.setState({ dataset_options: dataset_options,dataset_dirs: dataset_dirs});\n        // Select dataset folder from defined in URL parameters\n        if(this.state.selectedDataset===null){\n          this.setState({ selectedDataset: init.data[init.default].name,  datasetDir: init.data[init.default].directory});\n          this.addToUrl('dataset',init.data[init.default].name);\n        }else{\n          let foundInitDataset = false;\n          for (let i in init.data) {\n            if(init.data[i].name===this.state.selectedDataset){\n              this.setState({datasetDir: init.data[i].directory});\n              foundInitDataset = true;\n            } \n          }\n          if(!foundInitDataset) this.setState({ selectedDataset: init.data[init.default].name,  datasetDir: init.data[init.default].directory});\n        }\n      }\n      )\n      .then(()=> \n      this.loadConfig(this.state.datasetDir))\n\n  }\n\n  loadSettings(file){\n    fetch(`${process.env.PUBLIC_URL}/`+file)\n      .then(response => response.json())\n      .then(settings =>{\n        // Convert colors from rgb(255,0,0) to array [1.0,0.0,0.0]\n        try{\n          const floatColorConvertedArr = settings.clusters.clusterColors.map(myColorFunction);\n          function myColorFunction(value) {\n            return [color(value).rgb().array()[0]/255,color(value).rgb().array()[1]/255,color(value).rgb().array()[2]/255];\n          }\n          settings.clusters.clusterColors = floatColorConvertedArr;\n        }catch(error){}\n        // Save settings to \n        this.setState({\n          settings: settings\n        });\n      }\n      )\n      .then(() =>\n      this.prepareMappings(0))\n      .then(()=> \n      this.loadDataset(0))\n      // .then(()=> \n      // this.loadTiles())\n  }\n\n  loadMetadata(file){\n    fetch(`${process.env.PUBLIC_URL}/`+file)\n      .then(response => response.json())\n      .then(metadata =>\n        this.setState({\n          metadata: metadata,\n        })\n      )\n  }\n\n  // loadBarData(file){\n  //   fetch(`${process.env.PUBLIC_URL}/`+file)\n  //     .then(response => response.json())\n  //     .then(barData =>\n  //       this.setState({\n  //         barData: barData,\n  //       })\n  //     )\n  // }\n\n  loadPrompts(file){\n    fetch(`${process.env.PUBLIC_URL}/`+file)\n      .then(response => response.json())\n      .then(prompts =>\n        this.setState({\n          prompts: prompts,\n        })\n      )\n  }\n\n\n  render() {\n    return this.state.embeddings_data && this.state.metadata ? (\n\n      <Layout\n        {...this.state}\n        addToUrl={this.addToUrl.bind(this)}\n        algorithm_name={this.state.algorithm_name}\n        algorithm_options={this.state.algorithm_options}\n        dataset_options={this.state.dataset_options}\n        dataset_dirs={this.state.dataset_dirs}\n        changeDataset={this.changeDataset.bind(this)}\n        selectedDataset={this.state.selectedDataset}\n        datasetDir={this.state.datasetDir}\n        // tiles={this.tiles}\n      />\n\n    ) : (\n      <div className=\"loading\" ><CircularProgress color=\"inherit\"/><div>loading datasets... </div></div>\n      \n    )\n  }\n}\n\nexport default withRouter(Data)\n\n","import React from \"react\";\nimport {\n  BrowserRouter, Routes, Route\n} from \"react-router-dom\";\n\n// Area components\nimport './App.css'\nimport WithRouter from './Data'\n\nexport default function App() {\n  \n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route exact path=\"/\" element={<WithRouter/>} />\n        <Route exact path=\"/fruit-explorer\" element={<WithRouter/>}/> \n      </Routes>\n    </BrowserRouter>\n  );\n\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}